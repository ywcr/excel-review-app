# APIå‚æ•°éªŒè¯å¼‚å¸¸ä¿®å¤æ€»ç»“

## ğŸ” é—®é¢˜åˆ†æ

### é”™è¯¯ä¿¡æ¯
```
âŒ è·å–åŠ¨æ€ç›å€¼å¤±è´¥: Error: è·å–åŠ¨æ€ç›å€¼å¤±è´¥: å‚æ•°éªŒè¯å¼‚å¸¸
{"code":5000,"message":"å‚æ•°éªŒè¯å¼‚å¸¸","data":null,"count":null}
```

### é—®é¢˜åŸå› 
1. **ç«¯ç‚¹è·¯å¾„é”™è¯¯**: ç‰›è§£æ¶ˆè´¹è€…é—®å·çš„ç›å€¼ç«¯ç‚¹å¯èƒ½é…ç½®ä¸æ­£ç¡®
2. **URLç¼–ç é—®é¢˜**: `%2Fnjwj%2Fadd` ç¼–ç å¯èƒ½ä¸è¢«æœåŠ¡å™¨æ¥å—
3. **å‚æ•°æ ¼å¼é”™è¯¯**: `methodName` å‚æ•°çš„æ ¼å¼å¯èƒ½ä¸æ­£ç¡®
4. **ç«¯ç‚¹ä¸å­˜åœ¨**: è¯¥é—®å·ç±»å‹å¯èƒ½ä½¿ç”¨ä¸åŒçš„ç«¯ç‚¹ç»“æ„

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. æ”¹è¿›é”™è¯¯å¤„ç†å’Œè°ƒè¯•
åœ¨ `template-manager.js` ä¸­æ·»åŠ äº†ï¼š

#### è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—
```javascript
console.log('ğŸ” å¼€å§‹è·å–åŠ¨æ€ç›å€¼...');
console.log('è¯·æ±‚ç«¯ç‚¹:', `${API_BASE_URL}${config.saltEndpoint}`);
console.log('HTTPå“åº”çŠ¶æ€:', response.status, response.statusText);
console.log('APIå“åº”æ•°æ®:', result);
```

#### é’ˆå¯¹5000é”™è¯¯ç çš„ç‰¹æ®Šå¤„ç†
```javascript
if (result.code === 5000 && config.saltEndpointAlt) {
    console.warn('âš ï¸ ä¸»ç«¯ç‚¹å‚æ•°éªŒè¯å¼‚å¸¸ï¼Œå°è¯•å¤‡ç”¨ç«¯ç‚¹...');
    return await tryAlternativeEndpoint();
}
```

### 2. æ·»åŠ å¤‡ç”¨ç«¯ç‚¹æœºåˆ¶
åœ¨ `config.js` ä¸­ä¸ºç‰›è§£é—®å·æ·»åŠ äº†å¤‡ç”¨ç«¯ç‚¹ï¼š

```javascript
niujie_consumer: {
    // ä¸»ç«¯ç‚¹ï¼ˆå»æ‰URLç¼–ç ï¼‰
    saltEndpoint: "/lgb/payMerge/createDynamicsSalt?methodName=/njwj/add",
    // å¤‡ç”¨ç«¯ç‚¹
    saltEndpointAlt: "/lgb/njwj/createDynamicsSalt",
    // ...
}
```

### 3. è‡ªåŠ¨é‡è¯•æœºåˆ¶
å®ç°äº†æ™ºèƒ½é‡è¯•é€»è¾‘ï¼š

```javascript
// å¦‚æœä¸»ç«¯ç‚¹å¤±è´¥ï¼Œè‡ªåŠ¨å°è¯•å¤‡ç”¨ç«¯ç‚¹
async function tryAlternativeEndpoint() {
    console.log('ğŸ”„ å°è¯•å¤‡ç”¨ç«¯ç‚¹:', `${API_BASE_URL}${config.saltEndpointAlt}`);
    // ä½¿ç”¨å¤‡ç”¨ç«¯ç‚¹é‡æ–°è¯·æ±‚
}
```

### 4. åˆ›å»ºç«¯ç‚¹æµ‹è¯•å·¥å…·
åˆ›å»ºäº† `test-api-endpoints.html` æµ‹è¯•é¡µé¢ï¼ŒåŒ…å«ï¼š

#### é¢„è®¾ç«¯ç‚¹æµ‹è¯•
- ç‰›è§£-æ–¹å¼1: `/lgb/payMerge/createDynamicsSalt?methodName=/njwj/add`
- ç‰›è§£-æ–¹å¼2: `/lgb/payMerge/createDynamicsSalt?methodName=%2Fnjwj%2Fadd`
- ç‰›è§£-æ–¹å¼3: `/lgb/njwj/createDynamicsSalt`

#### è‡ªå®šä¹‰ç«¯ç‚¹æµ‹è¯•
- å¯ä»¥è¾“å…¥ä»»æ„ç«¯ç‚¹è¿›è¡Œæµ‹è¯•
- å®æ—¶æŸ¥çœ‹å“åº”ç»“æœ

#### æ‰€æœ‰é—®å·ç±»å‹æµ‹è¯•
- ä¸€æ¬¡æ€§æµ‹è¯•æ‰€æœ‰é—®å·çš„ç«¯ç‚¹
- å¿«é€Ÿæ‰¾å‡ºå“ªäº›æœ‰æ•ˆ

#### ç«¯ç‚¹å‘ç°åŠŸèƒ½
- è‡ªåŠ¨å°è¯•å¤šç§å¯èƒ½çš„ç«¯ç‚¹æ ¼å¼
- å¸®åŠ©å‘ç°æ­£ç¡®çš„APIè·¯å¾„

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. ç«‹å³æµ‹è¯•
1. æ‰“å¼€ `html/test-api-endpoints.html`
2. ç‚¹å‡»ä¸åŒçš„é¢„è®¾ç«¯ç‚¹æµ‹è¯•æŒ‰é’®
3. æŸ¥çœ‹å“ªä¸ªç«¯ç‚¹è¿”å›æˆåŠŸç»“æœ

### 2. æ‰¾åˆ°æ­£ç¡®ç«¯ç‚¹å
1. æ›´æ–° `config.js` ä¸­çš„ `saltEndpoint` é…ç½®
2. é‡æ–°ç”Ÿæˆä»£ç æµ‹è¯•

### 3. è°ƒè¯•æ­¥éª¤
å¦‚æœæ‰€æœ‰ç«¯ç‚¹éƒ½å¤±è´¥ï¼š
1. æ£€æŸ¥ç™»å½•çŠ¶æ€
2. ç¡®è®¤é—®å·ç±»å‹æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯
4. è”ç³»åç«¯ç¡®è®¤æ­£ç¡®çš„APIè·¯å¾„

## ğŸ“Š å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: URLç¼–ç é—®é¢˜
```javascript
// åŸæ¥çš„ï¼ˆå¯èƒ½æœ‰é—®é¢˜ï¼‰
saltEndpoint: "/lgb/payMerge/createDynamicsSalt?methodName=%2Fnjwj%2Fadd"

// ä¿®å¤åçš„
saltEndpoint: "/lgb/payMerge/createDynamicsSalt?methodName=/njwj/add"
```

### æ–¹æ¡ˆ2: ä½¿ç”¨ä¸“ç”¨ç«¯ç‚¹
```javascript
// å¦‚æœé€šç”¨ç«¯ç‚¹ä¸å·¥ä½œï¼Œä½¿ç”¨ä¸“ç”¨ç«¯ç‚¹
saltEndpoint: "/lgb/njwj/createDynamicsSalt"
```

### æ–¹æ¡ˆ3: å‚æ•°æ ¼å¼è°ƒæ•´
```javascript
// å¯èƒ½éœ€è¦ä¸åŒçš„å‚æ•°æ ¼å¼
saltEndpoint: "/lgb/payMerge/createDynamicsSalt?method=njwj"
```

## ğŸ¯ é¢„æœŸæ•ˆæœ

### ä¿®å¤å‰
```
âŒ è·å–åŠ¨æ€ç›å€¼å¤±è´¥: Error: è·å–åŠ¨æ€ç›å€¼å¤±è´¥: å‚æ•°éªŒè¯å¼‚å¸¸
```

### ä¿®å¤å
```
ğŸ” å¼€å§‹è·å–åŠ¨æ€ç›å€¼...
è¯·æ±‚ç«¯ç‚¹: https://zxyy.ltd/lgb/payMerge/createDynamicsSalt?methodName=/njwj/add
HTTPå“åº”çŠ¶æ€: 200 OK
âš ï¸ ä¸»ç«¯ç‚¹å‚æ•°éªŒè¯å¼‚å¸¸ï¼Œå°è¯•å¤‡ç”¨ç«¯ç‚¹...
ğŸ”„ å°è¯•å¤‡ç”¨ç«¯ç‚¹: https://zxyy.ltd/lgb/njwj/createDynamicsSalt
âœ… å¤‡ç”¨ç«¯ç‚¹è·å–æˆåŠŸ
âœ… åŠ¨æ€ç›å€¼è·å–æˆåŠŸ: {signkey: "abc123", timestamp: 1699123456}
```

## ğŸš€ ä¸‹ä¸€æ­¥

1. **ä½¿ç”¨æµ‹è¯•é¡µé¢** æ‰¾åˆ°æ­£ç¡®çš„ç«¯ç‚¹
2. **æ›´æ–°é…ç½®** ä½¿ç”¨æœ‰æ•ˆçš„ç«¯ç‚¹
3. **é‡æ–°æµ‹è¯•** APIæ¨¡å¼åŠŸèƒ½
4. **å¦‚æœä»æœ‰é—®é¢˜** å¯èƒ½éœ€è¦æ£€æŸ¥å…¶ä»–å‚æ•°æˆ–è”ç³»åç«¯

é€šè¿‡è¿™æ¬¡ä¿®å¤ï¼Œç³»ç»Ÿç°åœ¨å…·å¤‡äº†ï¼š
- æ›´å¥½çš„é”™è¯¯è¯Šæ–­èƒ½åŠ›
- è‡ªåŠ¨é‡è¯•æœºåˆ¶
- å®Œæ•´çš„ç«¯ç‚¹æµ‹è¯•å·¥å…·
- è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—

è¿™åº”è¯¥èƒ½å¸®åŠ©å¿«é€Ÿå®šä½å’Œè§£å†³APIç«¯ç‚¹é—®é¢˜ï¼
