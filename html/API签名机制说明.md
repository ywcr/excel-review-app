# API ç­¾åæœºåˆ¶è¯´æ˜

## ğŸ” ç­¾åæœºåˆ¶åˆ†æ

æ ¹æ®æ‚¨çš„ä»£ç åˆ†æï¼Œç³»ç»Ÿä¸­å­˜åœ¨ä¸¤ç§ä¸åŒçš„ API è°ƒç”¨æ–¹å¼ï¼š

### 1. ä¸éœ€è¦ç­¾åçš„æ¥å£

**æ¥å£åˆ—è¡¨ï¼š**

- `/lgb/lxrgl/save` - åˆ›å»ºè”ç³»äºº
- `/lgb/lxrgl/getMessage` - æŸ¥è¯¢è”ç³»äºº

**è°ƒç”¨æ–¹å¼ï¼š**

```javascript
$.ajax({
  url: "/lgb/lxrgl/save",
  type: "POST",
  data: {
    recId: "",
    nvcVal: "",
    empRecId: "",
    lxrType: "æ¶ˆè´¹è€…",
    name: name,
    sex: sex,
    remark: "",
  },
  traditional: true,
  success: function (res) {
    // å¤„ç†å“åº”
  },
});
```

**ç‰¹ç‚¹ï¼š**

- ç›´æ¥ä½¿ç”¨ jQuery çš„`$.ajax()`è°ƒç”¨
- åªä¼ é€’åŸºæœ¬çš„ POST æ•°æ®
- ä¸éœ€è¦ä»»ä½•ç­¾åæˆ–ç‰¹æ®Šè¯·æ±‚å¤´

### 2. éœ€è¦ç­¾åçš„æ¥å£

**æ¥å£åˆ—è¡¨ï¼š**

- `/lgb/xfzwj/add` - æäº¤é—®å·æ•°æ®

**è°ƒç”¨æµç¨‹ï¼š**

1. **è·å–åŠ¨æ€ç›å€¼**

   ```javascript
   GET /lgb/payMerge/createDynamicsSalt?methodName=%2Fxfzwj%2Fadd
   ```

2. **ç”Ÿæˆç­¾å**

   ```javascript
   // ä½¿ç”¨signkeyç”Ÿæˆsignç­¾å
   const sign = generateSign(data, signkey);
   ```

3. **æäº¤æ•°æ®**
   ```javascript
   POST /lgb/xfzwj/add
   Headers: {
       "sign": "2cef6bd753eca172999980f9e1f0286165049bcce297c5f56e2daff8f2314cef",
       "signkey": "59374"
   }
   ```

## ğŸ”§ ç­¾åç®—æ³•å®ç°

### å½“å‰å®ç°

```javascript
function generateSign(data, signkey) {
  // ä½¿ç”¨MD5å“ˆå¸Œç®—æ³•
  const signString = data + signkey;

  if (typeof CryptoJS !== "undefined" && CryptoJS.MD5) {
    return CryptoJS.MD5(signString).toString();
  } else {
    // å¤‡ç”¨MD5å®ç°
    return simpleMD5(signString);
  }
}
```

### ç­¾åå‚æ•°è¯´æ˜

- **data**: è¯·æ±‚æ•°æ®ï¼ˆå½“å‰ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¯èƒ½éœ€è¦æ ¹æ®å®é™… API è¦æ±‚è°ƒæ•´ï¼‰
- **signkey**: ä»`createDynamicsSalt`æ¥å£è·å–çš„åŠ¨æ€ç›å€¼
- **sign**: ä½¿ç”¨ MD5 ç®—æ³•ç”Ÿæˆçš„ç­¾å

## ğŸ“‹ API æ¨¡å¼ä¸­çš„æ¥å£åˆ†ç±»

### é—®å·ç›¸å…³æ¥å£ï¼ˆéœ€è¦ç­¾åï¼‰

- `createDynamicsSalt()` - è·å–åŠ¨æ€ç›å€¼
- `submitQuestionnaire()` - æäº¤é—®å·æ•°æ®

### è”ç³»äººç®¡ç†æ¥å£ï¼ˆä¸éœ€è¦ç­¾åï¼‰

- `getSame()` - æŸ¥è¯¢è”ç³»äººæ˜¯å¦å­˜åœ¨
- `addHuanzhe()` - åˆ›å»ºè”ç³»äºº

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç­¾åç®—æ³•**ï¼šå½“å‰ä½¿ç”¨ MD5ï¼Œå¦‚æœåç«¯ä½¿ç”¨å…¶ä»–ç®—æ³•éœ€è¦è°ƒæ•´
2. **æ•°æ®æ ¼å¼**ï¼šç­¾åå¯èƒ½éœ€è¦ç‰¹å®šçš„æ•°æ®ç»„åˆæ–¹å¼
3. **åº“ä¾èµ–**ï¼šå·²æ·»åŠ  CryptoJS åº“æ”¯æŒï¼ŒåŒæ—¶æä¾›å¤‡ç”¨å®ç°
4. **é”™è¯¯å¤„ç†**ï¼šåŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶

## ğŸ› ï¸ è°ƒè¯•å»ºè®®

1. **æ£€æŸ¥ç­¾å**ï¼šåœ¨æ§åˆ¶å°æŸ¥çœ‹ç”Ÿæˆçš„ç­¾åæ˜¯å¦æ­£ç¡®
2. **éªŒè¯ signkey**ï¼šç¡®è®¤åŠ¨æ€ç›å€¼è·å–æˆåŠŸ
3. **å¯¹æ¯”è¯·æ±‚**ï¼šä¸æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çš„å®é™…è¯·æ±‚å¯¹æ¯”
4. **æµ‹è¯•æ¥å£**ï¼šå…ˆæµ‹è¯•å•ä¸ªæ¥å£è°ƒç”¨æ˜¯å¦æˆåŠŸ

---

**æ€»ç»“**ï¼šç³»ç»Ÿä¸­æœ‰ä¸¤ç§ API è°ƒç”¨æ¨¡å¼ï¼Œé—®å·æäº¤éœ€è¦ç­¾åéªŒè¯ï¼Œè”ç³»äººç®¡ç†ä¸éœ€è¦ã€‚API æ¨¡å¼å·²æ ¹æ®è¿™ä¸ªåˆ†æè¿›è¡Œäº†ç›¸åº”çš„å®ç°ã€‚
